\documentclass{article}
\usepackage[utf8]{inputenc}

\usepackage[margin=1in]{geometry}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{ulem}

\usepackage{titlesec}
\setcounter{secnumdepth}{4}
\setcounter{tocdepth}{4}
\titleformat{\paragraph}
{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}
%{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}
{0pt}{1.0ex plus 1ex minus .2ex}{0.1ex plus .2ex}

\newcommand{\name}{ECW\ }
\newcommand{\nameNospace}{ECW}
\newcommand{\namep}{ECW.}

\renewcommand{\labelenumii}{\theenumii}
\renewcommand{\theenumii}{\theenumi.\arabic{enumii}}
\renewcommand{\theenumiii}{\theenumii.\arabic{enumiii}}

\usepackage{fancyhdr}
\pagestyle{fancy}

\lhead{ Responsible: Alexander Ekman \& Linnea Johnsson \\ Date: \today}  \rhead{Document number: PUSS21412 \\ Version: 1.21}
\renewcommand{\headrulewidth}{0.5pt} 



\title{PRD - Product Requirements Document}
%\title{Submodule test}
%\title{Submodule test2}
\author{Team 1}

\begin{document}

\date{}
\maketitle
\thispagestyle{fancy}
\newpage

\tableofcontents
%\newpage

\section*{Revision history}
%\begin{center}
\begin{tabular}{ |c|c|l| } 
 \hline
 Version & Date & Reason \\ \hline \hline
 1.0 & 2021-09-15 & First draft \\ \hline
 1.1 & 2021-09-15 & Fixed typos from team feedback \\ \hline
 1.11 & 2021-09-20 & Added references to SDP and PH book\\\hline
 1.12 & 2021-09-20 & Added clients product description to introduction and system user section \\\hline
 1.13 & 2021-09-20 & Added description of admin under Terminology Section\\\hline
 1.14 & 2021-09-21 & Linked requirements to user from pre-sprint 1\\\hline
 1.15 & 2021-09-21 & Added more categories of non-functional requirements\\\hline
 1.16 & 2021-09-21 & Added technological requirements\\\hline
 1.17 & 2021-09-21 & Linked all requirements to user stories\\\hline
 1.18 & 2021-09-21 & Completely revised route definitions and matching\\\hline
 1.19 & 2021-09-21 & Added new UML use case diagram and new figure caption\\\hline
 1.20 & 2021-09-21 & Fixed requirement dependencies\\\hline
 1.21 & 2021-09-21 & Updated Appendix B based on discussion with team\\\hline
 
\end{tabular}
%\end{center}

\newpage

\section{Referenced documents}
\begin{thebibliography}{widest entry}

    \bibitem{PH} "Programvaruutveckling för Stora System Projekthandledning 2021", Chapter 9, Institutionen för Datavetenskap Lunds Tekniska Högskola, Lunds Universitet, 26 August 2021
    
    \bibitem{SDP} "SDP - Software Development Plan, Team 1 - ETSN05", Alexander Ekman and Linnea Johnsson, url=\url{https://www.overleaf.com/read/bvbkjmdrkpdx}, accessed \today
    
    \bibitem{BNL} "Ride sharing Benefits, Brooklyn National Laboratory", 2012, url=\url{https://www.bnl.gov/rideshare/benefits.asp}, accessed 2021-09-14
    
\end{thebibliography}

\section{Introduction}\label{sec:intro}
This Product Requirements Document (PRD) details the requirements to develop a web-app based carpool service called ETSN05\_PG1 Carpool Webb-app (\nameNospace). The purpose of this PRD is to provide the system characteristics, the epics and user stories, as well as the requirements of the system. This document is intended as a basis for the contract between the development team and the client, it will also serve as a reference for the development team during the development process.

As stated in the clients product description\cite{PH}, \name will be a web-application for a carpool service. Users will set an origin, destination, time and date, for a car trip and be notified which car to go with. If the user is a driver, they should be able to go into the system, declare origin, destination, data and time, and be notified of any passengers joining the carpool. The system should find a reasonable distribution of passengers into the avaliable rides. In the simplest scenario, the system finds riders and drivers with the same origin, destination and time. In a more advanced scenario, the system can create rides where riders have different destinations along the same route. For example, one driver can drive between Malmö and Helsingborg with two passengers, where one rides along the whole route, and the other only rides along between Malmö and Landskrona. The system doesn't necessarily feature a map, but can utilize a list of addresses or cities from which users choose origin and destination. Users of the system need to register before using it. They will also declare if they are riders, drivers, or both. There should also be functionality for an administrative user, which can for example remove registered users. The system should also be able to handle abnormal behaviour from users without crashing or freezing. Multiple users should be able to use the system in paralell. There ares some topics left for the development team to work out, for example what cities are available, how a destination is defined to be "en rute", how riders and drivers are matched, and how they are notified.

The detailed plan of the developemnt can be found in the Software Development Plan (SDP) produced for the development of \nameNospace. The document includes the process model, the project's phases and their corresponding time-estimates. The SDP also includes a description of the project's organisation, time plan, configuration handling, and quality review, as well as a a risk analysis of the project\cite{SDP}.

\section{Background and product goals}
\subsection{Purpose}
A lot of the cars on our roads today are only transporting single individuals, which is problematic when aiming for a more sustainable future ~\cite{BNL}. The goal of \name is to give non-car owners and car owners the ability to easily match with each other and carpool together to a common destination. \name will provide its users with a more economic and sustainable mode of transportation.

\subsection{System Users}
The system user is either a non-car-owner who would like to carpool somewhere (rider), a car owner who is willing to bring someone along a planned route (driver), or someone who sometimes is a driver and sometimes a rider.

Based on the clients product description~\cite{PH}, \name users will register an account as either driver, rider or both. During registration, they will provide some contact details, and drivers will provide details of their car. These details will be possible to edit later. A rider can log in and request a starting city, a destination city, and a time and date they would like to go. Likewise, a driver can submit a starting city, a destination and a time that they have planned to leave, and if a drivers submission matches with one or several riders requests a match is made. Contact details are then shared between the users for easy communication between them. All users are also here given the option to decline the offer. For future versions it is planned for drivers to be able to enter multiple cities where they are willing to stop, and in such a way be able to support more short distance riders.

As specified in Section \ref{sec:intro} and the clients product description\cite{PH}, \name will support an administrator as a third user type. This admin user should have the ability to add registered users. In order to help with functionality testing during the product development, this administrator will also have the ability to create "fake" users and edit their profile details.

\section{Terminology}
\name = The name of the system\newline
Driver = A car owner who is willing to bring someone along a planned route\newline
Rider = A non-car-owner who would like to carpool somewhere\newline
Admin/Administrator = A user of the system with special privileges sremoving users.\newline
Drive instance = The objects created when a driver has declared that they will be driving a certain route a certain date and time\newline
Ride request = The objects created when a rider has declared that they would like to ride along a certain route a certain date and time\newline

\newpage
\section{System Use Case Diagram}
\begin{figure}[!htpb]
    \centering
    \includegraphics[scale=0.8]{prdFigures/system_case_diagram.pdf}
    \caption{The system use case diagram for \namep \  New users register as either riders, drivers, or both and can after registration log in to access the service. When logged in, the user is shown a submission form as a main page, shown in Figure \ref{fig:submission}. The user submits a an origin, destination, and time. If another rider/driver has a similar request a match is made and the users are notified. From the submission page, users can access their profile page, which is visualized in Figure \ref{fig:profile}. Here they can edit profile details, read notifications, and edit/accept/decline trips and matches.}
    \label{fig:useCaseDiagram}
\end{figure}

\newpage
\section{Epics, User stories, and Issues}
The entries are labeled as X.Y.Z where this represents a unique identifier as Epic.Story.Issue.
\begin{enumerate}
  
  \item User registration and authentication
  \begin{enumerate}
    \item As a user, I can register for the service as rider, drivers, or both
    \begin{enumerate}
        \item All users register full name, email, and phone number
        \item If a user is a driver, they register car brand, model, color, and licence plate
        \item Design registration window
        \item Add a registration button in the login window
        \item Add functionality to the registration button
        \item As a registered user, I want to be able to log in and out
        \item Users log in using email
    \end{enumerate}
  \end{enumerate}
  
  \item Matching
  \begin{enumerate}
      \item As a driver/rider, I select two cities and a time
      \begin{enumerate}
          \item If a user is registered as “both”, they have to specify if riding or driving
          \item Add a drop-down button of available cities (frontend)
          \item Add functionality to the drop-down of available cities (backend)
          \item Add a “Create Drive Instance”/“Create Ride Request” button for drivers/riders respectively (frontend)
          \item Design how to store the drive instances and ride requests
          \item If a request is created by a user it is added to the requests list
      \end{enumerate}
      \item As a driver I can also add cities on my route
  \end{enumerate}
  
  \item Matchmaking system
  \begin{enumerate}
      \item As a user, if two users have matching routes, we want to be paired up
      \begin{enumerate}
          \item Matches are made when there exists a driving instance, and there exists a rider request for a part of that route.
      \end{enumerate}
  \end{enumerate}
  
  \item After successful match
  \begin{enumerate}
      \item As a user, when a match is made, I want to be notified about the match and know how to recognize/contact each other
      \begin{enumerate}
          \item Implement notifications in BASE
          \item Send notifications to specific user
          \item Send notifications to users from match making system
          \item Include useful information in notifications (car brand, model, color, driver/rider phone number)
      \end{enumerate}
      \item As a driver, I want to be able to decline a match
      \item As a rider, I want to be able to decline a match
  \end{enumerate}
  
  \item Administration
  \begin{enumerate}
      \item As administrator I can remove users
      \begin{enumerate}
          \item Allow administrator to remove users
      \end{enumerate}
  \end{enumerate}
  
\end{enumerate}

\newpage
\section{Project Requirements}
This section contains all the technological,  functional and non-functional requirements of the system. Requirements associated to a user story ID marked with an asterisk (*) means that this requirement has been assigned the best matching Sprint 1 user story, but there will be a new and more relevant user story created for this requirement in sprint 2.

\subsection{Technological requirements}

\subsubsection{Back-end}

\paragraph{Java and Jetty}\label{req:javaandjetty}
\textbf{ID} T8: \newline
\textbf{User Story ID}: 1.1.0* \newline
\textbf{Priority}:HIGH \newline
\textbf{Description}: The system will utilize a Java backend with Jetty and Jersey. Jetty provides a small footprint HTTP server and servlet container, whilst Jersey is an abstraction layer on op of Jetty for implementing REST servers. \newline
\textbf{Rational}: This combination is chosen because this is a common setup and is the most familiar to the developers in the team.\newline
\textbf{Dependency}: none\newline

\paragraph{BASE server}\label{req:base}
\textbf{ID}: T4\newline
\textbf{User Story ID}: 1.1.0* \newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: The core of the system requires a server running the BASE system, provided as a part of the ETSN05 course at Lund University, faculty of engineering\newline
\textbf{Rational}: The BASE system provides the core front-end and back-end functionality for the web-app. This includes user registration, requests, admin user etc.\newline
\textbf{Dependency}: \ref{req:javaandjetty}\newline

\paragraph{SQL Trip database}\label{req:tripDatabase}
\textbf{ID}: T5\newline
\textbf{User Story ID}: 2.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: This project requires a server to host the submitted ride requests and drive instances in an SQL database so that these can be matched.\newline
\textbf{Rationale}: In order to run a matching algorithm\newline
\textbf{Dependency}: \ref{req:base}

\paragraph{Trip matching algorithm}\label{req:matchAlgorithm}
\textbf{ID}: T6\newline
\textbf{User Story ID}: 3.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: This project requires a server to run the matching algorithm between submitted ride requests and drive instances so that these can be matched.\newline
\textbf{Rationale}: In order to match riders and drivers\newline
\textbf{Dependency}: \ref{req:tripDatabase}

\subsubsection{Version control and unit testing}
\paragraph{Version control and issue tracking}\label{req:git}
\textbf{ID}: T7\newline
\textbf{User Story ID}: none \newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: During development, the development team requires the use of GitLab for both version control and issue tracking\newline
\textbf{Rational}: Version control and issue tracking is essential to the development and Lund University has an educational licence\newline
\textbf{Dependency}: none\newline

\paragraph{Unit testing}\label{req:unittesting}
\textbf{ID}: T9\newline
\textbf{User Story ID}: none\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: For Java and JavaScript unit testing the team will use JUnit and Jasmine respectively \newline
\textbf{Rational}: These are common tools already familiar to the development team\newline
\textbf{Dependency}: none\newline

\subsubsection{Front-end}

\paragraph{HTML, CSS}\label{req:}
\textbf{ID}: T1\newline
\textbf{User Story ID}: 1.1.0*\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: This project requires a server to host HTML and CSS code\newline
\textbf{Rationale}: In order to display contents to the users of the web-app\newline
\textbf{Dependency} \ref{req:base}:

\paragraph{JavaScript}\label{req:}
\textbf{ID}: T2\newline
\textbf{User Story ID}: 1.1.0*\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: This project requires a server to host JavaScript code\newline
\textbf{Rational}: JavaScript is necessary for the users interaction with the web-app and for web-app to dynamically change the contents shown to the user according to their actions\newline
\textbf{Dependency}: \ref{req:base}\newline

\paragraph{Bootstrap}\label{req:}
\textbf{ID}: T3\newline
\textbf{User Story ID}: 1.1.0* \newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: This project requires a server with support for bootstarp\newline
\textbf{Rational}: This makes the CSS and JavaScript development simpler, and gives the web-app a more modern look\newline
\textbf{Dependency}: \ref{req:base}\newline

%\paragraph{}\label{req:}
%\textbf{ID}: \newline
%\textbf{User Story ID}: \newline
%\textbf{Priority}: \newline
%\textbf{Description}: \newline
%\textbf{Rational}: \newline
%\textbf{Dependency}: \newline

\subsection{Functional requirements}
This section contains the requirements which specify the functions of the system.


\subsubsection{User registration and authentication}

\paragraph{User registration}\label{req:registration}
\textbf{ID}: F1\newline
\textbf{User Story ID}: 1.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A prospective user should be able to access the website and be guided to registering a new account, as shown in Figure \ref{fig:login}. To register for the service, all users must provide full name, email, password, and phone number as shown in Figure \ref{fig:register}.\newline
\textbf{Rationale}: In order for new members to register for the service\newline
\textbf{Dependency}: \ref{req:base}

\paragraph{Driver registration}\label{req:driverRegistration}
\textbf{ID}: F2\newline
\textbf{User Story ID}: 1.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A prospective user registering as a driver, or a rider and a driver must also register car brand, model, color, and licence plate number. This will be in addition to what is shown in Figure \ref{fig:register}\newline
\textbf{Rationale}: So that the driver is easily identifiable when picking up riders\newline
\textbf{Dependency}: \ref{req:registration}\newline

\paragraph{User log-in}\label{req:log-in}
\textbf{ID}: F3\newline
\textbf{User Story ID}: 1.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A registered use should be able to log in using their email and password as shown in Figure \ref{fig:login}. \newline
\textbf{Rationale}: In order to submit a drive instance or a ride request\newline
\textbf{Dependency}: \ref{req:registration}\newline

\paragraph{User log-out}\label{req:log-out}
\textbf{ID}: F4\newline
\textbf{User Story ID}: 1.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A logged in user should be able to log out from the current session, as shown in Figure \ref{fig:submission}. \newline
\textbf{Rationale}: In order to close a session\newline
\textbf{Dependency}: \ref{req:log-in}\newline

\subsubsection{Submitting drive instance or ride request}

\paragraph{Drive instance submission}\label{req:driveInstance}
\textbf{ID}: F5\newline
\textbf{User Story ID}: 2.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A logged in driver should be able to submit a drive instance by selecting an origin, a destination, and a time and date for departure as shown in Figure \ref{fig:submission}. \newline
\textbf{Rationale}: In order to show that a car is available on this route at this time\newline
\textbf{Dependency}: \ref{req:log-in}\newline

\paragraph{Ride request submission}\label{req:rideRequest}
\textbf{ID}: F6\newline
\textbf{User Story ID}: 2.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A logged in rider should be able to submit a ride request by selecting an origin, a destination, and a time and date for departure as shown in Figure \ref{fig:submission}. \newline
\textbf{Rationale}: In order to show that someone wants a ride on this route at this time\newline
\textbf{Dependency}: \ref{req:log-in}\newline

\paragraph{Dual user submission}\label{req:dualSubmission}
\textbf{ID}: F7\newline
\textbf{User Story ID}: 2.1.0\newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: A logged in user registered as both rider and driver should be able to submit either a ride request or diver instance by specifying if they are driving or riding as shown in Figure \ref{fig:submission}. \newline
\textbf{Rationale}: In order for driver and rider users to specify which type of user they are for this submission\newline
\textbf{Dependency}: \ref{req:log-in}\newline

\subsubsection{User profiles}

\paragraph{Profile details}\label{req:profileDetails}
\textbf{ID}: F8\newline
\textbf{User Story ID}: 1.1.0*\newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: A logged in user should be able to see and edit some of their profile details as shown in Figure \ref{fig:profile}. \newline
\textbf{Rationale}: In order for users to update their details in case they change\newline
\textbf{Dependency}: \ref{req:log-in}\newline

\paragraph{Upcoming travel}\label{req:upcomingTravel}
\textbf{ID}: F9\newline
\textbf{User Story ID}: 4.1.0*\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A logged in user who is matched with a rider/driver should see the upcoming routes and details of that route on their profile page as shown in Figure \ref{fig:profile} and Figure \ref{fig:profile2}. \newline
\textbf{Rationale}: So that users can be reminded of the details of upcoming routes\newline
\textbf{Dependency}: \ref{req:profileDetails}\newline

\paragraph{Necessary contact details}\label{req:contactDetails}
\textbf{ID}: F10\newline
\textbf{User Story ID}: 4.1.0*\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: Upcoming routes should display contact details of that route on the users profile page as shown in Figure \ref{fig:profile2}. \newline
\textbf{Rationale}: So that the driver and rider can find each other\newline
\textbf{Dependency}: \ref{req:profileDetails}\newline

\paragraph{Upcoming travel}\label{req:upcomingTravel}
\textbf{ID}: F11\newline
\textbf{User Story ID}: 4.2.0 \& 4.3.0\newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: A logged in user who is matched with a rider/driver needs to accept or decline matches with riders/drivers as shown in Figure \ref{fig:profile}. \newline
\textbf{Rationale}: In case the situation changes or the driver thinks that too many extra stops have been added\newline
\textbf{Dependency}: \ref{req:upcomingTravel}\newline

\subsubsection{User notification}

\paragraph{Match notification}\label{req:matchNotification}
\textbf{ID}: F12\newline
\textbf{User Story ID}: 4.1.0\newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: When a user is matched with a driver/rider they should be notified in the web app as shown in Figure \ref{fig:submission} and Figure \ref{fig:profile3}. \newline
\textbf{Rationale}: So that users don't miss successful matches\newline
\textbf{Dependency}: \ref{req:profileDetails}\newline

\subsubsection{Web-app administration}

\paragraph{Admin log in}\label{req:adminLog-in}
\textbf{ID}: F13\newline
\textbf{User Story ID}: 5.1.0*\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: As administrator of the system I should be able to log in and obtain extra privileges as administrator. \newline
\textbf{Rationale}: So that users abusing the system or who want to be removed can be removed\newline
\textbf{Dependency}: \ref{req:log-in}\newline

\paragraph{Removing users}\label{req:removingUser}
\textbf{ID}: F14\newline
\textbf{User Story ID}: 5.1.0\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: A logged in administrator should be able to remove users. \newline
\textbf{Rationale}: So that users abusing the system or who want to be removed can be removed\newline
\textbf{Dependency}: \ref{req:registration}\newline


\subsection{Non-functional requirements}
This section contains descriptions of requirements on the user interaction and system performance.

\subsubsection{Performance requirements}

\paragraph{Entering correct username and password}\label{req:}
\textbf{ID}: Per1\newline
\textbf{User Story ID}: 1.1.0*\newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: A user who enters a correct username and password, once pressing the "log in" button, should not wait longer than 2 seconds to see the submission page shown in Figure \ref{fig:submission}\newline
\textbf{Rationale}: Users should not wait to long to use the service\newline
\textbf{Dependency}: \ref{req:log-in} \newline

\paragraph{Entering incorrect username and password}\label{req:}
\textbf{ID}: Per2\newline
\textbf{User Story ID}: 1.1.0*\newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: A user who enters an incorrect username and password, once pressing the "log in" button, should not wait longer than 2 seconds to be prompted for another attempt \ref{fig:submission}\newline
\textbf{Rationale}: Users should not wait to long to use the service\newline
\textbf{Dependency}: \ref{req:log-in} \newline

\paragraph{Notification of new match}\label{req:}
\textbf{ID}: Per3\newline
\textbf{User Story ID}: 4.1.0*\newline
\textbf{Priority}: LOW\newline
\textbf{Description}: After a driver/rider is matched, their profile pages should update accordingly within 10 seconds\newline
\textbf{Rationale}: Avoiding clashes in user actions\newline
\textbf{Dependency}: \ref{req:matchNotification} \newline

\subsubsection{Reliability requirements}

\paragraph{User input}\label{req:}
\textbf{ID}: R1\newline
\textbf{User Story ID}: none* \newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: The webb-app should not crash or freeze due to user input\newline
\textbf{Rational}: So that users can reliably use the system\newline
\textbf{Dependency}: none\newline

\subsubsection{Memory requirements}

\paragraph{Memory usage}\label{req:}
\textbf{ID}: M1 \newline
\textbf{User Story ID}: none*\newline
\textbf{Priority}: MEDIUM\newline
\textbf{Description}: Running the web-app should never require more than 512 MB of memory from the users browser\newline
\textbf{Rational}: We want users with low end devices to be able to use the service\newline
\textbf{Dependency}: none\newline

\subsubsection{Usability requirements}

\paragraph{Browser Back and forward button}\label{req:}
\textbf{ID}: U1\newline
\textbf{User Story ID}: 4.1.0* \newline
\textbf{Priority}: LOW\newline
\textbf{Description}: A user using the back or forward button in their browser should be directed as expected. For example, a user on the submission screen pressing "Profile" as seen in Figure \ref{fig:submission} should be taken to the profile page seen in Figure \ref{fig:profile}. If the user presses "back" in their browser, they should be taken to the submission page. If the users presses forward after this, they are taken to their profile page.\newline
\textbf{Rational}: Having dysfunctional and unsupported navigation gives web-applications a very bad reputation and makes users frustrated\newline
\textbf{Dependency}: \label{req:profileDetails}\newline

\paragraph{Multiple users}\label{req:}
\textbf{ID}: U2\newline
\textbf{User Story ID}: none* \newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: Multiple users should be able to be logged in and use the system features in parallel\newline
\textbf{Rational}: This greatly increases the usability and efficiency of the system\newline
\textbf{Dependency}: none\newline

\paragraph{User browser and operating system}\label{req:}
\textbf{ID}: U3\newline
\textbf{User Story ID}: none* \newline
\textbf{Priority}: LOW\newline
\textbf{Description}: The system should work the same for users using Microsoft Edge, Google Chrome, Mozilla Firefox, or Safari web browsers. It should also be independent from their operating system\newline
\textbf{Rational}: If we discriminate one browser or operating system we risk missing out of ~20\% of the user base\newline
\textbf{Dependency}: none\newline

\paragraph{Mobile support}\label{req:}
\textbf{ID}: U4\newline
\textbf{User Story ID}: none*\newline
\textbf{Priority}: LOW\newline
\textbf{Description}: Users should be able to use the web-app from their mobile devices without suffereing from decreased usability compared to using a PC\newline
\textbf{Rational}: Most users will be on the go and require a good mobile user support\newline
\textbf{Dependency}: none\newline

\subsubsection{Portability requirements}

\paragraph{Remote/local host}\label{req:}
\textbf{ID}: Por1\newline
\textbf{User Story ID}: none\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: The system should be able to run in full on a local or remote host\newline
\textbf{Rational}: Enabling the system to run on a local host will make the distributed development simpler\newline
\textbf{Dependency}: none\newline

\paragraph{Host operating system}\label{req:}
\textbf{ID}: Por2\newline
\textbf{User Story ID}: none*\newline
\textbf{Priority}: HIGH\newline
\textbf{Description}: The system should support a host server of either Windows, Mac, or Linux\newline
\textbf{Rational}: Enabling the system server to be hosted on multiple OS makes it easier for development and distribution to client\newline
\textbf{Dependency}: none\newline

%\paragraph{}\label{req:}
%\textbf{ID}: \newline
%\textbf{User Story ID}: \newline
%\textbf{Priority}: \newline
%\textbf{Description}: \newline
%\textbf{Rational}: \newline
%\textbf{Dependency}: \newline

\newpage
\section{Appendix A: Prototypes}
\begin{figure}[!htpb]
    \centering
    \begin{minipage}{0.25\textwidth}
        \centering
        \includegraphics[scale=1]{prdFigures/login.pdf}
        \caption{Log-in screen shown to unauthenticated user. The window also guides unregistered users to register}
        \label{fig:login}
    \end{minipage}\hfill
    \begin{minipage}{0.25\textwidth}
        \centering
        \includegraphics[scale=1]{prdFigures/register.pdf}
        \caption{Screen shown to users registering for the first time. A distinction will be made if they register as drivers, as specified in paragraph \ref{req:driverRegistration}}
        \label{fig:register}
    \end{minipage}\hfill
    \begin{minipage}{0.25\textwidth}
        \centering
        \includegraphics[scale=1]{prdFigures/submission2.pdf}
        \caption{Submission screen shown after successful log-in. Here riders can submit ride requests, and drivers submit drive instances}
        \label{fig:submission}
    \end{minipage}\hfill
\end{figure}

\begin{figure}[!htpb]
    \centering
    \begin{minipage}{0.25\textwidth}
        \centering
        \includegraphics[scale=1]{prdFigures/profile.pdf}
        \caption{Profile screen showing users their current details and which of these are editable. It also shows upcoming trips and the choice to accept/decline them}
        \label{fig:profile}
    \end{minipage}\hfill
    \begin{minipage}{0.25\textwidth}
        \centering
        \includegraphics[scale=1]{prdFigures/profile2.pdf}
        \caption{Demonstration of how each upcoming trip can display more information}
        \label{fig:profile2}
    \end{minipage}\hfill
    \begin{minipage}{0.25\textwidth}
        \centering
        \includegraphics[scale=1]{prdFigures/profile3.pdf}
        \caption{Demonstration of how users will be notified about new events}
        \label{fig:profile3}
    \end{minipage}\hfill
\end{figure}

\newpage
\section{Appendix B: Available routes, and route matching}
The available origins and destinations that users can chose will be based on the lists found in "areas.csv" and "districts.csv". These files exist in the same respository as this PRD. "areas.csv" contain the major cities/counties in Skåne and their coordinates. "district.csv" contain the smaller city/county districts and their coordinates.

A driver will pick an origin and destination available in these files, and submit a drive instance together with a value for how much longer the trip is allowed to be with an added carpool rider (tolerance). A rider will pick an origin and destination available in these files and submit a ride request. For the drive instances and ride requests that have matching origins, they are tested for a match. A match is made if the riders destination doesn't deviate more than the tolerance from the drivers original route.

In order to deliver a working prototype early, and to deliver value to our client often, the initial implementation of the route matching will be simplified. In the initial implementation the original driver route will be estimated as a straight line between origin and destination on a flat plane. The deviation induced by a rider will be estimated as a perpendicular line from the original route to the rider destination. This could be done in spherical coordinates, but since an actual driving route is far from a straight line (or arc), spherical coordinates is not our main concern.

There is a major flaw with this straight line approach. For example, a straight line between Malmö and Kristianstad would put the small town of Önneköp right on that line with little to no deviation. But in reality, Önneköp is a 20 minute detour on this route. On the other side of the spectrum, if you draw a straight line between Malmö and Helsingborg, most of that line is across water, and the small town of Fjelie is a 10 km deviation from that line. But in reality, Fjelie is only a 4 min detour on this route, which is a very reasonable detour for a carpool.

We envision the matching to be delivered in three phases. In the first phase we will only support routes between town centers. Drivers and users will match if they have submitted the same origin and destination town centers. In the second phase, we will support routes between town centers and different city districts. In the third phase, we will also match drivers and riders where the rider only joins a part of the original rout, i.e the rider does not share the exact same origin and destination as the driver.

%A future version of the system should employ more sophisticated methods. For example, an external API such as MapQuest could determine the actual driving routes and how many minutes an extra carpool destination will add. The driver would then instead of a distance tolerance be able to add a time tolerance.

\end{document}